<?xml version="1.0" encoding="UTF-8"?>
<features xmlns="http://karaf.apache.org/xmlns/features/v1.4.0" name="${project.artifactId}-${project.version}" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.4.0 http://karaf.apache.org/xmlns/features/v1.4.0">
	<repository>mvn:org.ops4j.pax.cdi/pax-cdi-features/${org.ops4j.pax.cdi_pax-cdi-features.version}/xml/features</repository>
	<repository>mvn:${project.groupId}/net.osgiliath.feature.karaf-standard/${project.version}/xml/features</repository>
	<!-- <repository>mvn:${project.groupId}/net.osgiliath.feature.pax-base/${project.version}/xml/features</repository>  -->
	
	<feature name="osgiliath-pax-cdi" description="Provide CDI support" version="${org.ops4j.pax.cdi_pax-cdi-features.version}" start-level="50">
        <feature>osgiliath-scr</feature>
        <bundle dependency="true">mvn:javax.annotation/javax.annotation-api/${javax.annotation_javax.annotation-api.version}</bundle>
        <bundle dependency="true">mvn:javax.interceptor/javax.interceptor-api/${javax.interceptor_javax.interceptor-api.version}</bundle>
        <bundle dependency="true">mvn:org.glassfish/javax.el/${org.glassfish_javax.el.version}</bundle>
        <bundle dependency="true">mvn:javax.enterprise/cdi-api/${javax.enterprise_cdi-api.version}</bundle>
        <bundle dependency="true">mvn:org.apache.geronimo.specs/geronimo-atinject_1.0_spec/${org.apache.geronimo.specs_geronimo-atinject_1.0_spec.version}</bundle>
        <bundle dependency="true">mvn:org.apache.xbean/xbean-bundleutils/${org.apache.xbean_xbean-bundleutils.version}</bundle>
        <bundle dependency="true">mvn:net.osgiliath.wrappers/net.osgiliath.wrapper.xbean-finder/${project.version}</bundle>
        <bundle>mvn:org.ops4j.pax.cdi/pax-cdi-api/${org.ops4j.pax.cdi_pax-cdi-api.version}</bundle>
        <bundle>mvn:org.ops4j.pax.cdi/pax-cdi-spi/${org.ops4j.pax.cdi_pax-cdi-spi.version}</bundle>
        <bundle>mvn:org.ops4j.pax.cdi/pax-cdi-extension/${org.ops4j.pax.cdi_pax-cdi-extension.version}</bundle>
        <bundle>mvn:org.ops4j.pax.cdi/pax-cdi-extender/${org.ops4j.pax.cdi_pax-cdi-extender.version}</bundle>
    </feature>
    
   
    
	<feature name="osgiliath-pax-cdi-weld" description="Weld CDI 1.2 support" version="${org.ops4j.pax.cdi_pax-cdi-features.version}" start-level="50">
        <feature version="${org.ops4j.pax.cdi_pax-cdi-features.version}">osgiliath-pax-cdi</feature>
        <bundle dependency="true">mvn:org.jboss.weld/weld-osgi-bundle/${org.jboss.weld_weld-osgi-bundle.version}</bundle>
        <bundle>mvn:org.jboss.logging/jboss-logging/${org.jboss.logging_jboss-logging.version}</bundle>
        <bundle>mvn:com.google.guava/guava/${com.google.guava_guava.version}</bundle>
        <bundle>mvn:org.ops4j.pax.cdi/pax-cdi-weld/${org.ops4j.pax.cdi_pax-cdi-weld.version}</bundle>
		<bundle dependency="true">mvn:org.jboss.classfilewriter/jboss-classfilewriter/${org.jboss.classfilewriter_jboss-classfilewriter.version}</bundle>
		<capability>
        	pax.cdi.provider;provider:=weld
        </capability>
        <conditional>
            <condition>osgiliath-transaction</condition>
            <feature version="${org.apache.karaf.features_standard.version}">osgiliath-aries-blueprint</feature>
           <bundle>mvn:net.osgiliath.modules/net.osgiliath.module.cdi.tx/${project.version}</bundle>
        </conditional>
        <conditional>
            <condition>osgiliath-pax-cdi-web</condition>
            <condition>osgiliath-pax-http-jetty</condition>            
            <bundle>mvn:org.ops4j.pax.cdi/pax-cdi-jetty-weld/${org.ops4j.pax.cdi_pax-cdi-jetty-weld.version}</bundle>
        </conditional>
    </feature>
	
	<feature name="osgiliath-pax-cdi-web" description="Web CDI support" version="${org.ops4j.pax.cdi_pax-cdi-features.version}" start-level="50">
        <feature version="${org.ops4j.pax.cdi_pax-cdi-features.version}">osgiliath-pax-cdi</feature>
        <feature prerequisite="true">osgiliath-war</feature>
        <bundle dependency="true">mvn:javax.servlet/javax.servlet-api/${javax.servlet_javax.servlet-api.version}</bundle>
        <bundle>mvn:org.ops4j.pax.cdi/pax-cdi-web/${org.ops4j.pax.cdi_pax-cdi-web.version}</bundle>
    </feature>
	
	
    
	<feature name="osgiliath-deltaspike-core" description="Apache Deltaspike core support"
		version="${org.apache.deltaspike.core.version}" start-level="50">
		<feature version="${org.ops4j.pax.cdi_pax-cdi-features.version}" dependency="true">osgiliath-pax-cdi-weld</feature>
        <bundle>mvn:org.apache.deltaspike.core/deltaspike-core-api/${org.apache.deltaspike.core_deltaspike-core-api.version}</bundle>
        <bundle>mvn:org.apache.deltaspike.core/deltaspike-core-impl/${org.apache.deltaspike.core_deltaspike-core-impl.version}</bundle>
        <bundle start-level="30">mvn:org.apache.aries.spifly/org.apache.aries.spifly.dynamic.bundle/${org.apache.aries.spifly_org.apache.aries.spifly.dynamic.bundle.version}</bundle>
        <feature version="${org.apache.karaf.features_standard.version}">osgiliath-aries-blueprint</feature>
        <bundle>mvn:net.osgiliath.modules/net.osgiliath.module.deltaspike.configadmin/${project.version}</bundle>
        <requirement>
            pax.cdi.provider
        </requirement>
	</feature>


</features>